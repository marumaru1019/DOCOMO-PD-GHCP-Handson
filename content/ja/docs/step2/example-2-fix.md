---
title: ② 新規機能の設計
categories: [技術者向け, GitHub Copilot応用]
tags: [設計, 要件定義, アーキテクチャ, API設計]
weight: 2
---

GitHub Copilotを活用して新規機能の設計を効率的に行う方法を学びます。要件定義から技術設計、実装計画まで、Copilotとの対話を通じて体系的にアプローチしていきます。

今回は「Todo削除確認モーダル機能」を例に、実際の開発現場で必要となる設計プロセスを実践します。

## 🎯 機能概要

**対象機能**: Todo削除確認モーダル
**目的**: ユーザーの誤操作を防ぎ、UXを向上させる
**技術スタック**: React + TypeScript + Tailwind CSS

---

## 1. 要件定義フェーズ

### :pen: 例題

次のプロンプトを入力して、要件定義を進めます。

```text
#codebase

Todo削除確認モーダル機能を追加したいです。
基本的な機能要件と想定される利用シーンを教えてください。
出力は要件定義.mdに記載してください。
```

### :robot: 出力例

```markdown
## Todo削除確認モーダル機能 要件定義

### 基本機能
- **削除ボタンクリック時**: 確認モーダルを表示
- **モーダル内容**: Todoタイトル表示 + 「削除しますか？」メッセージ
- **ユーザー選択**: 「削除する」または「キャンセル」ボタン
- **削除実行**: モーダルを閉じてTodoを削除

### 利用シーン
- **誤操作防止**: 重要なTodoの意図しない削除を防ぐ
- **確認プロセス**: 削除前にユーザーが内容を再確認できる
- **安心感**: 取り消せない操作であることを明示

### 期待効果
- 誤削除の大幅減少
- ユーザー体験の向上
- データ保護の強化
```

> 💡 **補足**: さらに詳細な要件定義には、レスポンシブ対応、アクセシビリティ要件、パフォーマンス基準、ユーザーストーリーなどの観点を含めるとより包括的な設計ができます。

---

## 2. 技術設計フェーズ

### :pen: 例題

要件が整理できたら、技術設計を進めます。

```text
Todo削除確認モーダルの技術設計を作成してください。
必要なコンポーネントと状態管理の方針を教えてください。
出力は技術設計.mdに記載してください。
```

### :robot: 出力例

```markdown
# Todo削除確認モーダル 技術設計

## 新規作成コンポーネント

### DeleteConfirmModal
interface DeleteConfirmModalProps {
  isOpen: boolean;
  todoTitle: string;
  onConfirm: () => void;
  onCancel: () => void;
}

## 既存コンポーネント修正

### TodoItem.tsx
- 削除ボタンクリック時に確認モーダルを表示
- `onRequestDelete` プロパティを追加

### TodoApp.tsx
- モーダル表示状態を管理
- 削除確認・キャンセル処理を実装

## 状態管理
- **ローカル状態**: TodoApp内でモーダル状態を管理
- **理由**: 機能が局所的で他コンポーネントに影響しない
- **状態**: `{ isOpen: boolean, todoId: string, todoTitle: string }`

## 実装ポイント
- Tailwind CSSでスタイリング
- ESCキーでモーダルクローズ
- 条件付きレンダリングでパフォーマンス最適化
```

> � **補足**: より詳細な設計では、アクセシビリティ対応（ARIA属性、フォーカス制御）、レスポンシブ対応、アニメーション実装、エラーハンドリングなどの観点を含めると堅牢な設計になります。

---

## 3. 実装計画フェーズ

### :pen: 例題

技術設計が完了したら、実装計画を立てます。

```text
Todo削除確認モーダルの実装計画を作成してください。
タスクの分解と実装順序を教えてください。
出力は実装計画.mdに記載してください。
```

### :robot: 出力例

```markdown
## 実装計画

### 1. タスク分解（実装順序）

#### Step 1: 基盤作成 (2時間)
1. **DeleteConfirmModal コンポーネント作成**
   - モーダルUI実装
   - Props インターフェース定義

2. **TodoItem 修正**
   - 削除ボタンの処理変更
   - 確認モーダル表示処理

#### Step 2: 統合・テスト (1時間)
1. **TodoApp 修正**
   - モーダル状態管理追加
   - 削除確認・キャンセル処理

2. **動作確認**
   - 削除フロー全体テスト
   - エッジケース確認

### 2. 想定リスク
- **モーダルの表示位置**: z-index の競合 → Tailwind の z-50 使用で回避
- **キーボード操作**: ESCキー対応漏れ → 初期実装で対応

### 3. テスト項目
- モーダル表示・非表示
- 削除実行・キャンセル動作
- キーボード操作（ESCキー）

### 4. 完了基準
- 削除確認モーダルが正常に動作
- ESLint エラーなし
- 基本的なテストケースをパス
```

> 💡 **補足**: より詳細な計画では、工数見積もり、リスク分析の詳細化、包括的なテスト戦略、コードレビューポイント、パフォーマンス基準などの観点を含めると実装品質が向上します。

---

## :memo: 練習

1. **他の機能で試す**
   - Todo編集機能の設計
   - カテゴリ追加機能の要件定義
   - エクスポート機能の技術設計

2. **設計の見直し**
   - 要件に漏れがないか再確認
   - より良い技術選択肢の検討
   - 実装優先度の再評価

3. **チーム開発視点**
   - 複数人での作業分担
   - レビュープロセスの最適化
   - ドキュメント品質の向上

4. **段階的計画**
   - MVP (最小実行可能製品) の定義
   - 段階的リリース計画
   - ユーザーフィードバック収集

> 設計フェーズでの十分な検討は、後の実装・テスト工程での手戻りを大幅に削減します。Copilotを活用して多角的な視点から機能を分析し、堅牢な設計を心がけましょう。
