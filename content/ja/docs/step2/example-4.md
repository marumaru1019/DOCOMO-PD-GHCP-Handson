---
title: ④ 複雑なタスクを単純なタスクに分割する
categories: [GitHub Copilot, Prompt Engineering]
weight: 4
---

大きな機能を **1 度にすべて**実装しようとすると、Copilot が混乱して**意図しないコード**を返す可能性があります。そこで **複雑なタスク**を**小さなステップ**に分割し、**各ステップを順にチャットでやりとりしながら Copilot に頼む**方法を紹介します。  
ここでは「**ショッピングリスト管理**」を複数回の会話に分割して実装する流れを例示します。

---

## シナリオ – ショッピングリスト管理

**最終目標**: 「ユーザーがアイテムを追加・削除・一覧表示できる小さなショッピングリスト管理プログラム」を作る。  

**会話のイメージ**:  
1. チャットで **Step1** を依頼 → Copilot がコード生成 → そのコードを確認＆承諾  
2. 次の会話で **Step2** を依頼 → Copilot が追加メソッドを提案  
3. … といった具合に **複数回のやり取り**で完成させる

---

### ステップ分割 

1. **Step1**: アイテムを保持するクラス（`ShoppingItem`）  
2. **Step2**: アイテムを追加するメソッド（`ShoppingList#addItem`）  
3. **Step3**: アイテムを削除するメソッド（`ShoppingList#removeItem`）  
4. **Step4**: リストを表示するメソッド（`ShoppingList#showList`）  
5. **(オプション)** mainメソッドでまとめて呼び出し

---

### :pen: 例題 – 段階的にチャットする

#### Step1: `ShoppingItem` クラス

**会話その1**:

```text
Java 17で "ShoppingItem" クラスを作ってください:
- フィールド: name(String), quantity(int)
- コンストラクタで name, quantity をセット
- getter/setter も追加
```

**Copilot** が生成したコードを確認 → 「OK、承諾」でエディタに反映。

---

#### Step2: `ShoppingList` に addItem

**会話その2**:

```text
"ShoppingList"クラスを作りましょう。
- フィールド: List<ShoppingItem>
- メソッド: addItem(String name, int qty)
```

**Copilot** が `ShoppingList` クラス案を提案 → 承諾して追加。

---

#### Step3: 削除メソッド

**会話その3**:

```text
"ShoppingList" に removeItem(String name) を追加してください。
- name が一致するアイテムがあれば削除
```

Copilot がリストの検索＆削除のコードを提案 → 承諾後にファイルに反映。

---

#### Step4: リストを表示

**会話その4**:

```text
"ShoppingList" に showList() を追加。
- すべてのアイテムを name と quantity で出力してほしい
```

Copilot が**表示用メソッド**を追加 → 確認して承諾。

---

### 会話の繰り返しで完成

**最終的**に「mainメソッドで addItem/removeItem/showList を呼び出すサンプル」も依頼すると、**ショッピングリスト管理**の初歩的な完成版が出来上がります。

---

### :memo: 練習

1. **追加機能**  
   - 次の会話で「ファイル保存機能をステップ5として追加して」と頼むなど、**ステップ追加**を試す  
2. **ゼロショットとの比較**  
   - いっぺんに「ショッピングリストを作って」と言うのと何が違うか観察  
3. **ステップの修正**  
   - 「removeItem だけじゃなく、removeItemByIndex も欲しい」と途中で方針変更 → Copilotがどう対応するか

---

## まとめ

- **1度に大きな機能**を頼むと、Copilot が誤解や混乱を起こすリスクあり  
- **複雑なタスク**は **Step1→Step2→Step3…** と複数回の会話で**段階的**に実装させるほうが**精度UP**  
- 各ステップで**結果を確認＆承諾**し、次の会話に移る → チャットでのやりとりが**スムーズ**かつ**ミスが減少**  

こうして**繰り返しの会話**で**小さなタスク**を順番に実装すれば、最終的に**完成度**の高いコードをCopilotから得られます。