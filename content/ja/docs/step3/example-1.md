---
title: ① コード規約に沿ったコードの記載
categories: [GitHub Copilot, Engineer Usecases]
weight: 1
---

**GitHub Copilot** で最初から**自社やチームのコード規約**（スタイルガイド、Lintルールなど）を**意識したコード**を生成してもらえば、後から規約違反を修正する手間が減ります。そのために、**マークダウン形式の規約ファイル**を `#file` で参照させたり、**カスタムインストラクション**を設定する手法があります。

---

### :pen: 例題 – 規約ファイルを参照させる

以下のような**コード規約ファイル**を `code-style.md` に記述し、**`#file`** コマンドで読み込む例を示します。

```markdown
1. **クラスの最初**に必ずコメント：  
   /**
    * Generated by Copilot - Complies with internal code style
    */
2. メソッド名は **美味しそうな単語 + 動詞** で構成する  
   例: `bananaMix`, `pizzaBake`
3. 変数名は **LY** プレフィックスをつける  
   例: `LYCount`, `LYValue`
```

#### プロンプト例

```text
#file code-style.md に沿ってバブルソートを書いてください
```

---

### :robot: 出力例

```java
/**
 * Generated by Copilot - Complies with internal code style
 */
public class BubbleSort {

    public void appleSort(int[] LYArray) {
        int LYN = LYArray.length;
        for (int i = 0; i < LYN - 1; i++) {
            for (int j = 0; j < LYN - i - 1; j++) {
                if (LYArray[j] > LYArray[j + 1]) {
                    // swap LYArray[j] and LYArray[j+1]
                    int LYTemp = LYArray[j];
                    LYArray[j] = LYArray[j + 1];
                    LYArray[j + 1] = LYTemp;
                }
            }
        }
    }

    public static void main(String[] args) {
        BubbleSort sorter = new BubbleSort();
        int[] LYArray = {64, 34, 25, 12, 22, 11, 90};
        sorter.appleSort(LYArray);
        System.out.println("Sorted array:");
        for (int LYValue : LYArray) {
            System.out.print(LYValue + " ");
        }
    }
}
```

Copilot は**規約ファイルの内容**（クラス冒頭コメント、メソッド名ルール、変数名のLYプレフィックス等）を反映した形でコードを生成してくれます。

---

### :memo: カスタムインストラクション（プレビュー）

- **カスタムインストラクション**を使うと、VS Codeや`.github/copilot-instructions.md`に**規約や独自ルール**を書いておき、常に適用させられます
- プレビュー中の機能であり、VS Code と Visual Studio のみの Copilot Chat でサポートされています
- 例: VS Code の `settings.json` に以下の設定を追加
  ```jsonc
  "github.copilot.chat.codeGeneration.instructions": [
    {
      "text": "生成するコードには必ずクラス冒頭にコメント '// 🔥 Fiery Start: This class adheres to Code Style' をつける。"
    },
    {
      "file": "code-style.md"
    }
  ]
  ```

カスタムインストラクションを使用する場合、明示的にコード規約のファイルを参照させたりせずとも、**常に**適用されるようになります(下図で、`copilot-instructions.md`を明示的に参照させていないにもかかわらず、参照対象になっているのが確認できます)。
![Image](https://github.com/user-attachments/assets/76836e6b-9567-4bd7-b60f-7c864e7dc8cd)

---

### :memo: 練習

1. **規約を追加**  
   - たとえば「**例外を投げるときはMyCustomExceptionを使う**」などを `code-style.md` に追記し、Copilot がどう対応するか試す
2. **`.github/copilot-instructions.md`**  
   - `.github` フォルダ内に規約を置き、共有リポジトリでみんなが同じルールを適用できるか検証

---

## まとめ

- **規約ファイル**を `#file` で参照すれば、Copilot が**ルールに沿ったコード**を提案  
- **カスタムインストラクション**を設定すれば、**VSCode** や **`.github/copilot-instructions.md`** に記述した内容を**常に**適用可能  
- プロジェクトの**スタイルガイド**や**Lintルール**をCopilotに取り込むことで、**後から修正**する手間を**大幅削減**できる  

こうして**コード規約を最初から意識**したコードを生成させれば、**チーム開発**がよりスムーズに進みます。