---
title: ⑥ 運用手順書の作成
categories: [運用, GitHub Copilot]
weight: 6
---


**運用フェーズ**では、定期的に行う**本番反映（デプロイ）**などのルーティンがあり、作業手順を**ドキュメント化**しておくことが重要です。ここでは、「**週次で本番環境に反映するフロー**」を例に、**GitHub Copilot** を活用して**運用手順書**を自動生成する方法を示します。

---

### :pen: 例題

**シナリオ**: 毎週水曜に**ステージング→本番**への反映を実行。**Azure CLI**でWeb Appを更新し、**SmokeTest**や**ログ確認**などの作業も含める。

#### プロンプト例

```text
週次で行う本番反映手順書をMarkdownで作成してください。
以下のポイントを含めて:
1) GitHub上でバージョンタグを付ける
2) Azure CLIでデプロイ
3) SmokeTestの実施
4) ログ確認

対象アプリ: Java 17
```

---

### :robot: 出力例

```markdown
# 週次本番反映手順書

## 前提
- ステージング環境でテスト済み
- main ブランチに修正がマージ済み

## 1. バージョンタグ付与
1. ローカルで最新コードを取得  
   git checkout main
   git pull origin main
2. バージョンタグを作成 (例: `v1.2.3`)  
   git tag v1.2.3
   git push origin v1.2.3

## 2. Azure へのデプロイ
1. コードをビルド (Maven)
   mvn clean package
2. Azure にログイン
   az login
3. Web App へデプロイ (Java17)
   az webapp up \
     --name MyProductionApp \
     --runtime "java|17" \
     --resource-group MyResourceGroup

## 3. SmokeTest の実施
1. 本番URLにアクセスして基本機能を確認
2. ログインやメッセージ送信など主要操作をテスト
3. 重大エラーがないか簡易チェック

## 4. ログ確認
1. Azure Portal → App Service → 「Log stream」を開く
2. 10分程度動作させ、警告やエラーがないか確認
3. 問題があればチームに報告し、ロールバック対応を検討

## 補足
- 大きな機能追加時は DBマイグレーションなど別途手順が必要
- リリース後24時間はログを重点監視し、問題ないか観察
```

Copilot は**Markdown形式**で作業手順を整理し、**CLIコマンド**や**チェック項目**まで提案してくれます。

---

### :memo: 練習

1. **別のプラットフォームに変える**  
   - 「AWS Elastic Beanstalkで同じ流れを実施」と指示 → Copilot がコマンド例をどう書き換えるか確認  
2. **Slack通知や監視ツール連携を追加**  
   - 「デプロイ後にSlackへ通知」とか「New RelicでAPMを確認」と頼めば、追加ステップを盛り込む  
3. **Pull Requestで手順書をレビュー**  
   - Copilot 出力をチームがPRでチェックし、細部を加筆修正 → **改訂版**をマージして共有

---

## まとめ

- **定期的な本番反映**の手順は**常に**同じ流れ → **Copilot** で**手順書**を素早く生成 → チーム全員が**同じテンプレ**を使用  
- **CLIコマンド**や**確認手順**まで含めた形でMarkdown化 → **Wiki**や**リポジトリ**に置いて参照  
- 必要に応じて手順を**Pull Request**で更新しながら運用 → **継続的**な改善

こうして**Copilot** を使った**運用手順書**の作成により、**人為的ミスの削減**と**作業の標準化**を同時に実現できます。