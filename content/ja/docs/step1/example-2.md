---
title: ② 組み込みツール
categories: [GitHub Copilot, Agent Mode]
weight: 2
---

## 1. 組み込みツールとは？

Agent mode では、チャットに **`#ツール名`** を書くだけで、あらかじめ用意された「ツール」を呼び出せます。
ツールは *ファイル編集・検索・テスト実行・ターミナル操作* などを自動化する "作業ロボット" のような役割を果たし、Copilot がコード改修を進める際に裏で利用されます。

> **ポイント**
>
> * **チャット中から直接呼び出し** … 例：`#terminalSelection ターミナルで起きているエラーからコードを修正して`
> * **Agent mode の自律フロー内で自動起動** … 必要に応じてツールを選択し実行
> * **拡張や MCP サーバー** を追加すれば、サードパーティツールも利用可能

---

## 2. 組み込みツール一覧

| ツール                          | 目的・説明                            |
| ---------------------------- | -------------------------------- |
| `#changes`                   | Git 変更一覧を取得し、差分を参照に会話            |
| `#codebase`                  | ワークスペース全体をコード検索して関連箇所を抽出         |
| `#editFiles`                 | ファイルの新規作成・編集を行うツールセット            |
| `#extensions`                | VS Code 拡張機能を検索・質問               |
| `#fetch`                     | 指定 URL の HTML/JSON などを取得して内容を利用  |
| `#findTestFiles`             | テストファイルを検索して一覧化                  |
| `#githubRepo`                | GitHub 上の公開リポジトリをコード検索           |
| `#new`                       | 新しい VS Code ワークスペースをスキャフォールド     |
| `#openSimpleBrowser`         | VS Code 内ブラウザでローカル Web アプリをプレビュー |
| `#problems`                  | Problems パネルのエラー・警告を取得           |
| `#readCellOutput`            | Notebook のセル出力を読み取り              |
| `#runCommands`               | ターミナルコマンドを実行し出力を取得               |
| `#runNotebooks`              | Notebook のセルを実行し出力を取得            |
| `#runTasks`                  | `tasks.json` に定義したタスクを実行         |
| `#runTests`                  | テストスイートを実行し結果を取得                 |
| `#search` / `#searchResults` | ワークスペース内のファイル検索＆結果取得             |
| `#selection`                 | エディタで選択中のテキストをコンテキスト追加           |
| `#terminalSelection`         | ターミナルで選択中のテキスト（コマンドなど）を追加        |
| `#terminalLastCommand`       | 直近で実行したターミナルコマンドを追加              |
| `#testFailure`               | テスト失敗情報をコンテキストに追加                |
| `#usages`                    | シンボル参照・実装・定義情報をまとめて取得            |
| `#VSCodeAPI`                 | VS Code 拡張 API のリファレンスを検索        |

---

## 3. 具体的なツールの使い方

### :pen: 例題

代表的なツールの使用方法を見てみましょう。

### 3.1 `#terminalSelection`

* **何をする？**  現在ターミナルで *ドラッグ選択* している文字列（コマンド・出力など）を、チャットの追加コンテキストとして送信。
* **活用例**

  ```text
  #terminalSelection このエラーの原因と解決策を教えて
  ```
* **便利ポイント**  手作業でコピペせずに CLI のエラー全文を渡せるので、原因分析やコマンドの説明がスムーズ。

---

### 3.2 `#fetch`

* **何をする？**  インターネット上の URL を取得し、その内容（HTML / JSON など）をチャットコンテキストに追加。
* **活用例**

  ```text
  React の公式サイトのトップページを #fetch https://react.dev で取得し、見出しタグだけ抜き出してください
  ```
* **便利ポイント**  外部 API ドキュメントやリリースノートを即座に要約できる。

---

### 3.3 `#githubRepo`

* **何をする？**  GitHub 公開リポジトリをコード検索し、該当ファイルや行をコンテキスト提供。
* **活用例**

  ```text
  global snippet という文字列が使われているファイルを #githubRepo microsoft/vscode で検索してください
  ```
* **便利ポイント**  大規模 OSS の実装例を瞬時に参照でき、自プロジェクトへの適用検討に役立つ。

---

## 4. Tips — ツールの使い方を Copilot に聞く

ツール名の後ろに **「このコマンドの使い方を教えて」** と入力すると、Copilot がそのツールの説明と使い方ガイドを返してくれます。

```text
#runTests このコマンドの使い方を教えて
```

> この機能は **すべての組み込みツール** で利用可能です。新しいツールを覚える手間が省けます。

---

## 5. Agent mode で自動的に使用されるツールの選択方法
![ツールの選択方法](../images/tool_select.png)
1. **Tool Picker を開く**
   - Agent mode では、入力欄右端の 🔧 アイコンから *Tool Picker* が開きます。
2. **ツールの ON/OFF を切り替える**
   - ここで **ツールの チェックボックス** をON/OFFし、「今回はターミナル関連ツールだけ使う」といった制御が可能です。

---

## :memo: 練習

1. **`#terminalSelection`** を使って実際のエラーメッセージを分析してみてください
2. **`#fetch`** で外部APIドキュメントを取得し、要約を作成してみてください
3. **`#githubRepo`** で興味のあるOSSプロジェクトのコードを検索してみてください

---

## 6. まとめ

* 組み込みツールは **Agent mode の自律編集を支える拡張腕**
* `#ツール名` でチャットから直接呼び出し、必要なツールを明示的に呼び出し
* 使い方がわからなければ `#ツール名 このコマンドの使い方を教えて` でツール自体に質問
* **Tool Picker** でツールの ON/OFF を制御し、作業に最適な環境を構築
